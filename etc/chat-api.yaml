Name: chat-rag
Host: 0.0.0.0
Port: 8888

# Logging configuration
Log:
  LogFilePath: "logs/"
  LogScanIntervalSec: 10
  EnableClassification: false
  ClassifyModel: "gpt-oss-120b"

# Context Compression
ContextCompressConfig:
  EnableCompress: false
  TokenThreshold: 100_000
  SummaryModel: "qwen2.5-coder-32b"
  SummaryModelTokenThreshold: 64_000
  RecentUserMsgUsedNums: 3

PreciseContextConfig:
  EnableEnvDetailsFilter: true
  # Control which agents in which modes cannot use ModesChange
  DisabledModesChangeAgents:
    strict:
      - "strict"
      - "requirements"
      - "architect"
      - "task"
      - "review"
    vibe:
      - "review"

  AgentsMatch:
    - AgentName: "strict"
      MatchKey: "a strict strategic workflow controller"
    - AgentName: "requirements"
      MatchKey: "an experienced requirements analyst specializing"
    - AgentName: "code"
      MatchKey: "a highly skilled software engineer"
    - AgentName: "architect"
      MatchKey: "an experienced technical leader"
    - AgentName: "task"
      MatchKey: "a project manager specializing in task decomposition"
    - AgentName: "test"
      MatchKey: "a professional testing engineer"
    - AgentName: "testguide"
      MatchKey: "a senior architect and testing expert"
    - AgentName: "review"
      MatchKey: "a code review expert skilled at analyzing issues"

# Department configuration
DepartmentApiEndpoint: "http://localhost:1234/work_id?work_id="

# Models supported by function calling
LLM:
  # Endpoint: "https://zgsm.sangfor.com/chat-rag/api/v1/chat/completions"
  Endpoint: "http://127.0.0.1:30616/v1/chat/completions"
  # Endpoint: "http://127.0.0.1:32325/model/glm-4.5-fp8/v1/chat/completions"

LLMRetry:
  # 总体重试流程允许的最大耗时（毫秒）
  TotalTimeoutMs: 30000
  # 单次调用 LLM 的超时时间上限（毫秒）
  RequestTimeoutMs: 30000

LLMTimeout:
  # 单次连续空闲阈值（毫秒），默认 30000ms
  IdleTimeoutMs: 30000
  # 总空闲预算（毫秒），跨重试/降级累计空闲时长上限，默认 30000ms
  TotalIdleTimeoutMs: 30000

Redis:
  Addr: "127.0.0.1:6379"

# Semantic API configuration
Tools:
  # Control which agents in which modes cannot use tools
  DisabledAgents:
    strict:
      - "strict"
      - "task"

  SemanticSearch:
    SearchEndpoint: "http://123.58.64.57:30080/codebase-embedder/api/v1/search/semantic"
    ApiReadyEndpoint: "http://123.58.64.57:30080/codebase-embedder/api/v1/embeddings/summary"
    TopK: 50
    ScoreThreshold: 0.7
  DefinitionSearch:
    SearchEndpoint: "http://127.0.0.1:9001/codebase-indexer/api/v1/search/definition"
    ApiReadyEndpoint: "http://127.0.0.1:9001/codebase-indexer/api/v1/index/summary"
  ReferenceSearch:
    SearchEndpoint: "http://127.0.0.1:9001/codebase-indexer/api/v1/callgraph"
    ApiReadyEndpoint: "http://127.0.0.1:9001/codebase-indexer/api/v1/index/summary"
  KnowledgeSearch:
    SearchEndpoint: "http://127.0.0.1:9001/codebase-embedder/api/v1/search/document"
    ApiReadyEndpoint: "http://127.0.0.1:9001/codebase-embedder/api/v1/documents/summary"
    TopK: 20
    ScoreThreshold: 0.7